<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administrador - Prefabricadas Premium</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 50%, #D2B48C 100%);
            min-height: 100vh;
            color: #333;
        }

        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .admin-header {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .admin-title img {
            width: 80px;
            height: auto;
        }

        .admin-title h1 {
            color: #8B4513;
            font-size: 2rem;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
            border-top: 4px solid #8B4513;
        }

        .stat-number {
            font-size: 3rem;
            font-weight: bold;
            color: #8B4513;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-size: 1.1rem;
        }

        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-btn {
            padding: 12px 24px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: white;
            color: #8B4513;
        }

        .tab-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .users-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .users-table th,
        .users-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .users-table th {
            background: #f8f9fa;
            color: #8B4513;
            font-weight: bold;
        }

        .progress-bar-small {
            width: 100px;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill-small {
            height: 100%;
            background: linear-gradient(90deg, #8B4513, #A0522D);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
        }

        .status-in-progress {
            background: #fff3cd;
            color: #856404;
        }

        .status-not-started {
            background: #f8d7da;
            color: #721c24;
        }

        .exam-details {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .question-result {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 5px 0;
        }

        .answer-correct {
            color: #28a745;
            font-weight: bold;
        }

        .answer-incorrect {
            color: #dc3545;
            font-weight: bold;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: #A0522D;
            color: white;
        }

        .btn-primary:hover {
            background: #8B4513;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-info {
            background: #17a2b8;
            color: white;
        }

        .email-config {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .email-config input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
        }

        .notifications {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #007bff;
        }

        .export-section {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .admin-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .admin-stats {
                grid-template-columns: 1fr;
            }

            .admin-tabs {
                flex-wrap: wrap;
            }

            .users-table {
                font-size: 14px;
            }

            .export-section {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Header -->
        <div class="admin-header">
            <div class="admin-title">
                <img src="./assets/5. TRASPARENTE LETRA NEGRA.png" alt="Prefabricadas Premium">
                <div>
                    <h1>Panel de Administrador</h1>
                    <p>Monitoreo de Capacitación</p>
                </div>
            </div>
            <div>
                <button class="btn btn-primary" onclick="refreshData()">🔄 Actualizar Datos</button>
                <button class="btn btn-success" onclick="exportData()">📊 Exportar Excel</button>
            </div>
        </div>

        <!-- Estadísticas Generales -->
        <div class="admin-stats">
            <div class="stat-card">
                <div class="stat-number" id="totalUsers">0</div>
                <div class="stat-label">Usuarios Registrados</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="completedCourses">0</div>
                <div class="stat-label">Cursos Completados</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="passedExams">0</div>
                <div class="stat-label">Exámenes Aprobados</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="certificatesIssued">0</div>
                <div class="stat-label">Certificados Emitidos</div>
            </div>
        </div>

        <!-- Configuración de Notificaciones -->
        <div class="email-config">
            <h3>📧 Configuración de Notificaciones</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <label>Email para Notificaciones:</label>
                    <input type="email" id="adminEmail" placeholder="admin@prefabricadas.com" value="contacto@molivaresprefabricadas.cl">
                </div>
                <div>
                    <label>Tipo de Notificaciones:</label>
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <label><input type="checkbox" id="notifyRegistration" checked> Nuevos Registros</label>
                        <label><input type="checkbox" id="notifyCertificates" checked> Certificados</label>
                        <label><input type="checkbox" id="notifyExams" checked> Exámenes</label>
                    </div>
                </div>
            </div>
            <button class="btn btn-success" onclick="saveEmailConfig()">💾 Guardar Configuración</button>
        </div>

        <!-- Tabs -->
        <div class="admin-tabs">
            <button class="tab-btn active" onclick="showTab('users')">👥 Usuarios</button>
            <button class="tab-btn" onclick="showTab('exams')">📝 Exámenes</button>
            <button class="tab-btn" onclick="showTab('certificates')">🏆 Certificados</button>
            <button class="tab-btn" onclick="showTab('analytics')">📊 Análisis</button>
        </div>

        <!-- Tab: Usuarios -->
        <div id="users-tab" class="tab-content active">
            <h2>📋 Lista de Usuarios</h2>
            <div class="export-section">
                <button class="btn btn-info" onclick="exportUsers()">📤 Exportar Usuarios</button>
                <button class="btn btn-primary" onclick="sendBulkEmail()">📧 Email Masivo</button>
            </div>
            <table class="users-table">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Email</th>
                        <th>Empresa</th>
                        <th>Progreso</th>
                        <th>Estado</th>
                        <th>Último Acceso</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="usersTableBody">
                    <!-- Los usuarios se cargarán dinámicamente -->
                </tbody>
            </table>
        </div>

        <!-- Tab: Exámenes -->
        <div id="exams-tab" class="tab-content">
            <h2>📝 Resultados de Exámenes</h2>
            <div class="export-section">
                <button class="btn btn-info" onclick="exportExams()">📤 Exportar Resultados</button>
            </div>
            <div id="examResults">
                <!-- Los resultados se cargarán dinámicamente -->
            </div>
        </div>

        <!-- Tab: Certificados -->
        <div id="certificates-tab" class="tab-content">
            <h2>🏆 Certificados Emitidos</h2>
            <div class="export-section">
                <button class="btn btn-info" onclick="exportCertificates()">📤 Exportar Certificados</button>
            </div>
            <div id="certificatesList">
                <!-- Los certificados se cargarán dinámicamente -->
            </div>
        </div>

        <!-- Tab: Analytics -->
        <div id="analytics-tab" class="tab-content">
            <h2>📊 Análisis y Estadísticas</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                <div>
                    <h3>Progreso por Video</h3>
                    <canvas id="videoProgressChart" width="400" height="200"></canvas>
                </div>
                <div>
                    <h3>Resultados de Examen</h3>
                    <canvas id="examScoresChart" width="400" height="200"></canvas>
                </div>
            </div>
        </div>

        <!-- Notifications -->
        <div id="notifications" class="notifications" style="display: none;">
            <strong>🔔 Notificación:</strong> <span id="notificationText"></span>
        </div>
    </div>

    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { 
            getFirestore, 
            collection, 
            getDocs, 
            doc, 
            getDoc,
            onSnapshot,
            query,
            orderBy
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Configuración Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCVPYAMyRmWVzQ8NfyJVSeoPybQxaEpeAQ",
            authDomain: "prefabricadas-training-v2.firebaseapp.com",
            projectId: "prefabricadas-training-v2",
            storageBucket: "prefabricadas-training-v2.firebasestorage.app",
            messagingSenderId: "125236838775",
            appId: "1:125236838775:web:fa553422f56eddf32fa172"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Inicializar EmailJS
        emailjs.init('YOUR_EMAILJS_USER_ID'); // Reemplazar con tu User ID de EmailJS

        class AdminPanel {
            constructor() {
                this.users = [];
                this.examAttempts = [];
                this.certificates = [];
                this.adminEmail = 'contacto@molivaresprefabricadas.cl';
                
                this.loadData();
                this.setupRealTimeListeners();
            }

            async loadData() {
                await Promise.all([
                    this.loadUsers(),
                    this.loadExamAttempts(),
                    this.loadCertificates()
                ]);
                
                this.updateStats();
                this.renderUsers();
                this.renderExams();
                this.renderCertificates();
            }

            async loadUsers() {
                try {
                    const usersRef = collection(db, 'users');
                    const snapshot = await getDocs(usersRef);
                    this.users = [];
                    
                    snapshot.forEach(doc => {
                        this.users.push({
                            id: doc.id,
                            ...doc.data()
                        });
                    });
                } catch (error) {
                    console.error('Error loading users:', error);
                }
            }

            async loadExamAttempts() {
                try {
                    const examsRef = collection(db, 'examAttempts');
                    const q = query(examsRef, orderBy('timestamp', 'desc'));
                    const snapshot = await getDocs(q);
                    this.examAttempts = [];
                    
                    snapshot.forEach(doc => {
                        this.examAttempts.push({
                            id: doc.id,
                            ...doc.data()
                        });
                    });
                } catch (error) {
                    console.error('Error loading exam attempts:', error);
                }
            }

            async loadCertificates() {
                try {
                    const certsRef = collection(db, 'certificates');
                    const snapshot = await getDocs(certsRef);
                    this.certificates = [];
                    
                    snapshot.forEach(doc => {
                        this.certificates.push({
                            id: doc.id,
                            ...doc.data()
                        });
                    });
                } catch (error) {
                    console.error('Error loading certificates:', error);
                }
            }

            setupRealTimeListeners() {
                // Listener para nuevos usuarios
                const usersRef = collection(db, 'users');
                onSnapshot(usersRef, (snapshot) => {
                    snapshot.docChanges().forEach((change) => {
                        if (change.type === 'added') {
                            this.handleNewUser(change.doc.data());
                        }
                    });
                });

                // Listener para nuevos certificados
                const certsRef = collection(db, 'certificates');
                onSnapshot(certsRef, (snapshot) => {
                    snapshot.docChanges().forEach((change) => {
                        if (change.type === 'added') {
                            this.handleNewCertificate(change.doc.data());
                        }
                    });
                });
            }

            handleNewUser(userData) {
                this.sendEmailNotification('new_user', {
                    userName: userData.fullName,
                    userEmail: userData.email,
                    company: userData.company
                });
                
                this.showNotification(`Nuevo usuario registrado: ${userData.fullName}`);
            }

            handleNewCertificate(certData) {
                this.sendEmailNotification('new_certificate', {
                    studentName: certData.studentName,
                    certificateId: certData.certificateId,
                    issueDate: certData.issueDate
                });
                
                this.showNotification(`Nuevo certificado emitido: ${certData.studentName}`);
            }

            async sendEmailNotification(type, data) {
                const templates = {
                    new_user: {
                        subject: '🆕 Nuevo Usuario Registrado - Academia Premium',
                        message: `
                            Nuevo usuario se ha registrado en la Academia de Capacitación:
                            
                            👤 Nombre: ${data.userName}
                            📧 Email: ${data.userEmail}
                            🏢 Empresa: ${data.company}
                            🕐 Fecha: ${new Date().toLocaleString('es-ES')}
                        `
                    },
                    new_certificate: {
                        subject: '🏆 Nuevo Certificado Emitido - Academia Premium',
                        message: `
                            Se ha emitido un nuevo certificado:
                            
                            👤 Estudiante: ${data.studentName}
                            🆔 ID Certificado: ${data.certificateId}
                            📅 Fecha: ${new Date(data.issueDate).toLocaleString('es-ES')}
                            🎯 Curso: Especialista en Ventas de Productos Prefabricados Premium
                        `
                    }
                };

                const template = templates[type];
                if (!template) return;

                try {
                    await emailjs.send('your_service_id', 'your_template_id', {
                        to_email: this.adminEmail,
                        subject: template.subject,
                        message: template.message
                    });
                } catch (error) {
                    console.error('Error sending email:', error);
                }
            }

            updateStats() {
                const totalUsers = this.users.length;
                const completedCourses = this.users.filter(user => 
                    user.progress?.completedVideos?.length === 6
                ).length;
                const passedExams = this.users.filter(user => 
                    user.progress?.examScore === 100
                ).length;
                const certificatesIssued = this.certificates.length;

                document.getElementById('totalUsers').textContent = totalUsers;
                document.getElementById('completedCourses').textContent = completedCourses;
                document.getElementById('passedExams').textContent = passedExams;
                document.getElementById('certificatesIssued').textContent = certificatesIssued;
            }

            renderUsers() {
                const tbody = document.getElementById('usersTableBody');
                tbody.innerHTML = '';

                this.users.forEach(user => {
                    const progress = user.progress || {};
                    const completedVideos = progress.completedVideos?.length || 0;
                    const progressPercent = Math.round((completedVideos / 6) * 100);
                    
                    let status = 'not-started';
                    let statusText = 'No Iniciado';
                    
                    if (progress.certificateIssued) {
                        status = 'completed';
                        statusText = 'Certificado';
                    } else if (completedVideos > 0) {
                        status = 'in-progress';
                        statusText = 'En Progreso';
                    }

                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${user.fullName || 'N/A'}</td>
                        <td>${user.email || 'N/A'}</td>
                        <td>${user.company || 'N/A'}</td>
                        <td>
                            <div class="progress-bar-small">
                                <div class="progress-fill-small" style="width: ${progressPercent}%"></div>
                            </div>
                            <small>${completedVideos}/6 videos (${progressPercent}%)</small>
                        </td>
                        <td><span class="status-badge status-${status}">${statusText}</span></td>
                        <td>${progress.lastUpdated ? new Date(progress.lastUpdated.seconds * 1000).toLocaleDateString('es-ES') : 'N/A'}</td>
                        <td>
                            <button class="btn btn-info" onclick="viewUserDetails('${user.id}')">👁️ Ver</button>
                            <button class="btn btn-primary" onclick="sendUserEmail('${user.id}')">📧 Email</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }

            renderExams() {
                const container = document.getElementById('examResults');
                container.innerHTML = '';

                const examsByUser = {};
                this.examAttempts.forEach(attempt => {
                    if (!examsByUser[attempt.userId]) {
                        examsByUser[attempt.userId] = [];
                    }
                    examsByUser[attempt.userId].push(attempt);
                });

                Object.keys(examsByUser).forEach(userId => {
                    const user = this.users.find(u => u.id === userId);
                    const attempts = examsByUser[userId];
                    const latestAttempt = attempts[0]; // Más reciente

                    const examDiv = document.createElement('div');
                    examDiv.className = 'exam-details';
                    examDiv.innerHTML = `
                        <h4>${user?.fullName || 'Usuario Desconocido'} - ${user?.company || 'N/A'}</h4>
                        <p><strong>Puntuación:</strong> ${latestAttempt.score}/${latestAttempt.correctAnswers.length} (${latestAttempt.percentage}%)</p>
                        <p><strong>Fecha:</strong> ${new Date(latestAttempt.timestamp.seconds * 1000).toLocaleString('es-ES')}</p>
                        <p><strong>Intentos:</strong> ${attempts.length}</p>
                        
                        <h5>Respuestas Detalladas:</h5>
                        ${this.renderAnswerDetails(latestAttempt)}
                    `;
                    container.appendChild(examDiv);
                });
            }

            renderAnswerDetails(attempt) {
                const questions = [
                    "¿Cuál es la principal diferencia entre la construcción tradicional y la construcción industrializada?",
                    "En el mundo privado, ¿qué tipo de soluciones ofrece Prefabricadas Premium?",
                    "¿Qué tipo de proyectos se han desarrollado para el mundo empresarial?",
                    "En el portafolio social, ¿qué productos destacan?",
                    "¿Cuál es una ventaja clave de la industrialización en la construcción?",
                    "¿Cómo resume Prefabricadas Premium su propuesta de valor?",
                    "¿Qué es lo que entrega Prefabricadas Premium a sus clientes?"
                ];

                let html = '';
                attempt.answers.forEach((answer, index) => {
                    const correct = answer === attempt.correctAnswers[index];
                    const icon = correct ? '✅' : '❌';
                    const className = correct ? 'answer-correct' : 'answer-incorrect';
                    
                    html += `
                        <div class="question-result">
                            <span>${icon}</span>
                            <span class="${className}">
                                P${index + 1}: ${questions[index]?.substring(0, 50)}... 
                                Respuesta: ${answer.toUpperCase()}
                            </span>
                        </div>
                    `;
                });
                return html;
            }

            renderCertificates() {
                const container = document.getElementById('certificatesList');
                container.innerHTML = '';

                this.certificates.forEach(cert => {
                    const certDiv = document.createElement('div');
                    certDiv.className = 'exam-details';
                    certDiv.innerHTML = `
                        <h4>🏆 ${cert.studentName}</h4>
                        <p><strong>ID Certificado:</strong> ${cert.certificateId}</p>
                        <p><strong>Fecha:</strong> ${new Date(cert.issueDate).toLocaleString('es-ES')}</p>
                        <p><strong>Curso:</strong> ${cert.courseName}</p>
                        <p><strong>Puntuación:</strong> ${cert.score}%</p>
                        <button class="btn btn-primary" onclick="downloadCertificate('${cert.id}')">📄 Descargar</button>
                        <button class="btn btn-success" onclick="emailCertificate('${cert.id}')">📧 Enviar por Email</button>
                    `;
                    container.appendChild(certDiv);
                });
            }

            showNotification(message) {
                const notification = document.getElementById('notifications');
                const text = document.getElementById('notificationText');
                text.textContent = message;
                notification.style.display = 'block';
                
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 5000);
            }

            exportToExcel(data, filename) {
                const csv = this.convertToCSV(data);
                const blob = new Blob([csv], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.setAttribute('hidden', '');
                a.setAttribute('href', url);
                a.setAttribute('download', filename);
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            }

            convertToCSV(data) {
                if (!data.length) return '';
                
                const headers = Object.keys(data[0]);
                const csvContent = [
                    headers.join(','),
                    ...data.map(row => 
                        headers.map(header => `"${row[header] || ''}"`).join(',')
                    )
                ].join('\n');
                
                return csvContent;
            }
        }

        // Funciones globales
        window.showTab = function(tabName) {
            // Ocultar todas las tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Mostrar tab seleccionada
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
        };

        window.refreshData = function() {
            adminPanel.loadData();
            adminPanel.showNotification('Datos actualizados correctamente');
        };

        window.exportUsers = function() {
            const userData = adminPanel.users.map(user => ({
                'Nombre': user.fullName,
                'Email': user.email,
                'Empresa': user.company,
                'Videos Completados': user.progress?.completedVideos?.length || 0,
                'Examen Completado': user.progress?.examCompleted ? 'Sí' : 'No',
                'Puntuación Examen': user.progress?.examScore || 0,
                'Certificado': user.progress?.certificateIssued ? 'Sí' : 'No',
                'Fecha Registro': user.createdAt ? new Date(user.createdAt.seconds * 1000).toLocaleDateString('es-ES') : 'N/A'
            }));
            
            adminPanel.exportToExcel(userData, 'usuarios-capacitacion.csv');
        };

        window.exportExams = function() {
            const examData = adminPanel.examAttempts.map(attempt => {
                const user = adminPanel.users.find(u => u.id === attempt.userId);
                return {
                    'Usuario': user?.fullName || 'N/A',
                    'Email': user?.email || 'N/A',
                    'Empresa': user?.company || 'N/A',
                    'Puntuación': attempt.score,
                    'Porcentaje': attempt.percentage,
                    'Fecha': new Date(attempt.timestamp.seconds * 1000).toLocaleDateString('es-ES'),
                    'Respuestas': attempt.answers.join(',')
                };
            });
            
            adminPanel.exportToExcel(examData, 'resultados-examenes.csv');
        };

        window.exportCertificates = function() {
            const certData = adminPanel.certificates.map(cert => ({
                'Estudiante': cert.studentName,
                'ID Certificado': cert.certificateId,
                'Curso': cert.courseName,
                'Fecha Emisión': new Date(cert.issueDate).toLocaleDateString('es-ES'),
                'Puntuación': cert.score
            }));
            
            adminPanel.exportToExcel(certData, 'certificados-emitidos.csv');
        };

        window.saveEmailConfig = function() {
            const email = document.getElementById('adminEmail').value;
            adminPanel.adminEmail = email;
            localStorage.setItem('adminEmail', email);
            adminPanel.showNotification('Configuración de email guardada');
        };

        // Inicializar panel de administrador
        let adminPanel;
        document.addEventListener('DOMContentLoaded', () => {
            adminPanel = new AdminPanel();
        });
    </script>
</body>
</html>